{"ast":null,"code":"import \"antd/es/card/style/css\";\nimport _Card from \"antd/es/card\";\nimport \"antd/es/table/style/css\";\nimport _Table from \"antd/es/table\";\nimport \"antd/es/button/style/css\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/icon/style/css\";\nimport _Icon from \"antd/es/icon\";\nimport \"antd/es/message/style/css\";\nimport _message from \"antd/es/message\";\nvar _jsxFileName = \"/home/crc/WebstormProjects/react-admin/src/pages/category/category.jsx\";\nimport React from 'react';\nimport \"./category.less\";\nimport LinkButton from \"../../components/link-button\";\nimport { reqCategorys } from \"../../api\";\nexport default class Category extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      categorys: [],\n      loading: false,\n      parentId: '0',\n      parentName: '',\n      subCategorys: []\n    };\n\n    this.initColumns = () => {\n      this.columns = [{\n        title: '分类名称',\n        dataIndex: 'name',\n        key: 'name'\n      }, {\n        title: '操作',\n        width: 300,\n        dataIndex: '',\n        key: 'x',\n        render: category => React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 29\n          },\n          __self: this\n        }, React.createElement(LinkButton, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 30\n          },\n          __self: this\n        }, \"\\u4FEE\\u6539\\u5206\\u7C7B\"), this.state.parentId === '0' ? React.createElement(LinkButton, {\n          onClick: () => this.showSubCategorys(category),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32\n          },\n          __self: this\n        }, \"\\u67E5\\u770B\\u5B50\\u5206\\u7C7B\") : null)\n      }];\n    };\n\n    this.showSubCategorys = category => {\n      this.setState({\n        parentId: category._id,\n        parentName: category.name\n      }, () => {\n        this.getCategorys();\n      });\n    };\n\n    this.getCategorys = async () => {\n      this.setState({\n        loading: true\n      });\n      const {\n        parentId\n      } = this.state;\n      const result = await reqCategorys(parentId);\n      this.setState({\n        loading: false\n      });\n\n      if (result.data.status == \"0\") {\n        const categorys = result.data.data;\n        console.log(categorys);\n\n        if (parentId === '0') {\n          this.setState({\n            categorys\n          });\n        } else {\n          this.setState({\n            subCategorys: categorys\n          });\n        }\n      } else {\n        _message.error(\"获取分类失败\");\n      }\n    };\n  }\n\n  componentWillMount() {\n    this.initColumns();\n  }\n\n  componentDidMount() {\n    this.getCategorys();\n  }\n\n  render() {\n    const {\n      categorys,\n      loading,\n      subCategorys,\n      parentId\n    } = this.state;\n    const columns = this.columns;\n    const title = parentId === 0 ? \"一级分类列表\" : React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(LinkButton, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"\\u4E00\\u7EA7\\u5206\\u7C7B\\u5217\\u8868\"), React.createElement(_Icon, {\n      type: \"arrow-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }));\n    const extra = React.createElement(_Button, {\n      type: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(_Icon, {\n      type: \"plus\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }), \"\\u6DFB\\u52A0\");\n    const dataSource = [{\n      \"parentId\": '0',\n      \"_id\": '5ca9d69',\n      \"name\": '家用电器',\n      \"_v\": 0\n    }, {\n      \"parentId\": '0',\n      \"_id\": '5ca9d6c',\n      \"name\": '电脑',\n      \"_v\": 0\n    }, {\n      \"parentId\": '0',\n      \"_id\": '5ca9d7c',\n      \"name\": '图书',\n      \"_v\": 0\n    }, {\n      \"parentId\": '0',\n      \"_id\": '5ca9dbe',\n      \"name\": '服装',\n      \"_v\": 0\n    }];\n    /*\n    return (\n        <Card title={title} extra={extra}>\n            <Table\n                rowKey=\"_id\"\n                bordered\n                dataSource={dataSource} columns={columns} />;\n        </Card>\n    )\n    *\n     */\n\n    return React.createElement(_Card, {\n      title: title,\n      extra: extra,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(_Table, {\n      rowKey: \"_id\",\n      bordered: true,\n      dataSource: parentId === '0' ? categorys : subCategorys,\n      columns: columns,\n      pagination: {\n        defaultPageSize: 5\n      },\n      loading: loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/crc/WebstormProjects/react-admin/src/pages/category/category.jsx"],"names":["React","LinkButton","reqCategorys","Category","Component","state","categorys","loading","parentId","parentName","subCategorys","initColumns","columns","title","dataIndex","key","width","render","category","showSubCategorys","setState","_id","name","getCategorys","result","data","status","console","log","error","componentWillMount","componentDidMount","extra","dataSource","defaultPageSize"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {Card,Table,Button,Icon,message} from \"antd\"\nimport \"./category.less\"\nimport LinkButton from \"../../components/link-button\";\nimport {reqCategorys} from \"../../api\"\n\nexport default class Category extends React.Component {\n\n    state = {\n        categorys:[],\n        loading:false,\n        parentId:'0',\n        parentName:'',\n        subCategorys:[]\n    }\n\n    initColumns = () =>{\n        this.columns = [\n            {\n                title: '分类名称',\n                dataIndex: 'name',\n                key: 'name',\n            },\n            {\n                title: '操作',\n                width:300,\n                dataIndex: '',\n                key: 'x',\n                render:(category)=>(<span>\n                    <LinkButton>修改分类</LinkButton>\n                    {this.state.parentId ==='0'\n                        ?<LinkButton onClick={()=>this.showSubCategorys(category)}>查看子分类</LinkButton>\n                        :null}\n\n                </span>)\n            }\n\n        ];\n    }\n\n    showSubCategorys=(category)=>{\n        this.setState({\n            parentId:category._id,\n            parentName:category.name\n        },()=>{\n            this.getCategorys()\n        })\n\n    }\n\n    getCategorys = async () =>{\n       this.setState({loading:true});\n       const {parentId} = this.state;\n       const result = await reqCategorys(parentId);\n        this.setState({loading:false});\n       if(result.data.status==\"0\"){\n            const categorys = result.data.data;\n            console.log(categorys);\n            if(parentId==='0'){\n                this.setState({categorys});\n            }else{\n                this.setState({subCategorys:categorys})\n            }\n\n\n       }else{\n           message.error(\"获取分类失败\")\n       }\n    }\n\n    componentWillMount() {\n        this.initColumns();\n    }\n\n    componentDidMount() {\n        this.getCategorys();\n    }\n\n    render(){\n        const {categorys,loading,subCategorys,parentId} = this.state;\n        const columns = this.columns\n        const title = parentId ===0?\"一级分类列表\":(\n            <span>\n                <LinkButton>一级分类列表</LinkButton>\n                <Icon type=\"arrow-right\"></Icon>\n            </span>);\n        const extra = (\n            <Button type=\"primary\">\n                <Icon type=\"plus\"/>添加\n            </Button>\n        )\n\n        const dataSource = [\n            {\n                \"parentId\": '0',\n                \"_id\": '5ca9d69',\n                \"name\": '家用电器',\n                \"_v\":0\n            },{\n                \"parentId\": '0',\n                \"_id\": '5ca9d6c',\n                \"name\": '电脑',\n                \"_v\":0\n            },{\n                \"parentId\": '0',\n                \"_id\": '5ca9d7c',\n                \"name\": '图书',\n                \"_v\":0\n            },{\n                \"parentId\": '0',\n                \"_id\": '5ca9dbe',\n                \"name\": '服装',\n                \"_v\":0\n            }\n\n        ];\n\n\n\n        /*\n        return (\n            <Card title={title} extra={extra}>\n                <Table\n                    rowKey=\"_id\"\n                    bordered\n                    dataSource={dataSource} columns={columns} />;\n            </Card>\n        )\n        *\n         */\n\n        return (\n            <Card title={title} extra={extra}>\n                <Table\n                    rowKey=\"_id\"\n                    bordered\n                    dataSource={parentId==='0'?categorys:subCategorys}\n                    columns={columns}\n                    pagination={{defaultPageSize:5}}\n                    loading={loading}\n                />\n            </Card>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}