{"ast":null,"code":"import\"antd/es/button/style/css\";import _Button from\"antd/es/button\";import\"antd/es/checkbox/style/css\";import _Checkbox from\"antd/es/checkbox\";import\"antd/es/form/style/css\";import _Form from\"antd/es/form\";import\"antd/es/input/style/css\";import _Input from\"antd/es/input\";import\"antd/es/icon/style/css\";import _Icon from\"antd/es/icon\";import _regeneratorRuntime from\"/home/crc/WebstormProjects/react-admin/node_modules/@babel/runtime/regenerator\";import\"antd/es/message/style/css\";import _message from\"antd/es/message\";import _asyncToGenerator from\"/home/crc/WebstormProjects/react-admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/crc/WebstormProjects/react-admin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/crc/WebstormProjects/react-admin/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/crc/WebstormProjects/react-admin/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/crc/WebstormProjects/react-admin/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/crc/WebstormProjects/react-admin/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import\"./login.less\";import logo from\"../../assets/images/logo.png\";import{reqLogin}from\"../../api\";import memoryUtils from\"../../utils/memoryUtils\";import storageUtiles from\"../../utils/storageUtiles\";import{connect}from\"react-redux\";import{login}from\"../../redux/actions\";var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);function Login(){var _getPrototypeOf2;var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Login)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.handleSubmit=function(e){e.preventDefault();_this.props.form.validateFields(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(err,values){var response,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(err){_context.next=9;break;}_this.props.login(values.username,values.password);_context.next=4;return reqLogin(values.username,values.password);case 4:response=_context.sent;result=response.data;if(!result.stateus){_message.success(\"login success\");memoryUtils.user={username:\"crc\",role:{menus:\"/product\"}};storageUtiles.saveUser({username:\"crc\"});_this.props.history.replace(\"/admin\");}_context.next=10;break;case 9:console.log(\"validate fail\");case 10:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());};_this.validatorPwd=function(rule,value,callback){if(!value){callback(\"not empty\");}else if(value.length<6){callback(\"at least 6\");}else if(value.length>12){callback(\"most 12\");}else{callback();}};return _this;}_createClass(Login,[{key:\"render\",value:function render(){//const user = memoryUtils.user;\nvar user=this.props.user;console.log(user);var getFieldDecorator=this.props.form.getFieldDecorator;return React.createElement(\"div\",{className:\"login\"},React.createElement(\"header\",{className:\"login-header\"},React.createElement(\"img\",{src:logo,alt:\"logo\"}),React.createElement(\"h1\",null,\"React \\u540E\\u53F0\\u7BA1\\u7406\\u7CFB\\u7EDF\")),React.createElement(\"section\",{className:\"login-content\"},React.createElement(\"h2\",null,\"\\u7528\\u6237\\u767B\\u5F55\"),React.createElement(\"div\",null,React.createElement(_Form,{onSubmit:this.handleSubmit,className:\"login-form\"},React.createElement(_Form.Item,null,getFieldDecorator('username',{rules:[{required:true,message:'Please input your username!'},{min:4,message:'at least 4'},{max:12,message:'most 12'}]})(React.createElement(_Input,{prefix:React.createElement(_Icon,{type:\"user\",style:{color:'rgba(0,0,0,.25)'}}),placeholder:\"Username\"}))),React.createElement(_Form.Item,null,getFieldDecorator('password',{rules:[{validator:this.validatorPwd}]})(React.createElement(_Input,{prefix:React.createElement(_Icon,{type:\"lock\",style:{color:'rgba(0,0,0,.25)'}}),type:\"password\",placeholder:\"Password\"}))),React.createElement(_Form.Item,null,getFieldDecorator('remember',{valuePropName:'checked',initialValue:true})(React.createElement(_Checkbox,null,\"Remember me\")),React.createElement(\"a\",{className:\"login-form-forgot\",href:\"#\"},\"Forgot password\"),React.createElement(_Button,{type:\"primary\",htmlType:\"submit\",className:\"login-form-button\"},\"Log in\"),\"Or \",React.createElement(\"a\",{href:\"\"},\"register now!\"))))));}}]);return Login;}(React.Component);var WrappedNormalLoginForm=_Form.create()(Login);export default connect(function(state){return{user:state.user};},{login:login})(WrappedNormalLoginForm);","map":{"version":3,"sources":["/home/crc/WebstormProjects/react-admin/src/pages/login/login.jsx"],"names":["React","logo","reqLogin","memoryUtils","storageUtiles","connect","login","Login","handleSubmit","e","preventDefault","props","form","validateFields","err","values","username","password","response","result","data","stateus","success","user","role","menus","saveUser","history","replace","console","log","validatorPwd","rule","value","callback","length","getFieldDecorator","rules","required","message","min","max","color","validator","valuePropName","initialValue","Component","WrappedNormalLoginForm","create","state"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport \"./login.less\"\nimport logo from \"../../assets/images/logo.png\"\nimport { Form, Icon, Input, Button, Checkbox } from 'antd';\nimport {reqLogin} from \"../../api\"\nimport {message} from \"antd\"\nimport memoryUtils from \"../../utils/memoryUtils\";\nimport storageUtiles from \"../../utils/storageUtiles\";\nimport {connect} from \"react-redux\"\nimport { login} from \"../../redux/actions\"\n\nclass Login extends React.Component{\n\n\n    handleSubmit = e => {\n        e.preventDefault();\n       this.props.form.validateFields(async (err,values)=>{\n           if(!err){\n               this.props.login(values.username,values.password)\n              const response = await reqLogin(values.username,values.password);\n              const result = response.data;\n              if(!result.stateus){\n                  message.success(\"login success\");\n                  memoryUtils.user = {username:\"crc\",role:{menus:\"/product\"}}\n                  storageUtiles.saveUser({username:\"crc\"});\n                  this.props.history.replace(\"/admin\")\n              }\n           }else{\n               console.log(\"validate fail\")\n           }\n       })\n    };\n\n    validatorPwd = (rule,value,callback)=>{\n        if(!value){\n            callback(\"not empty\")\n        }else if(value.length<6){\n            callback(\"at least 6\")\n        }else if(value.length>12){\n            callback(\"most 12\")\n        }else{\n            callback()\n        }\n\n    }\n\n    render(){\n        //const user = memoryUtils.user;\n        const user = this.props.user\n        console.log(user);\n\n        const { getFieldDecorator } = this.props.form;\n         return (\n            <div className=\"login\">\n                <header className=\"login-header\">\n                    <img src={logo} alt=\"logo\" />\n                    <h1>React 后台管理系统</h1>\n                </header>\n                <section className=\"login-content\">\n                    <h2>用户登录</h2>\n                    <div>\n                        <Form onSubmit={this.handleSubmit} className=\"login-form\">\n                            <Form.Item>\n                                {getFieldDecorator('username', {\n                                    rules: [\n                                        { required: true, message: 'Please input your username!' },\n                                        { min: 4, message: 'at least 4' },\n                                        { max: 12, message: 'most 12' }\n\n                                        ],\n                                })(\n                                    <Input\n                                        prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n                                        placeholder=\"Username\"\n                                    />,\n                                )}\n                            </Form.Item>\n                            <Form.Item>\n                                {getFieldDecorator('password', {\n                                    rules: [\n                                        { validator:this.validatorPwd}\n                                        ],\n                                })(\n                                    <Input\n                                        prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n                                        type=\"password\"\n                                        placeholder=\"Password\"\n                                    />,\n                                )}\n                            </Form.Item>\n                            <Form.Item>\n                                {getFieldDecorator('remember', {\n                                    valuePropName: 'checked',\n                                    initialValue: true,\n                                })(<Checkbox>Remember me</Checkbox>)}\n                                <a className=\"login-form-forgot\" href=\"#\">\n                                    Forgot password\n                                </a>\n                                <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\n                                    Log in\n                                </Button>\n                                Or <a href=\"\">register now!</a>\n                            </Form.Item>\n                        </Form>\n                    </div>\n                </section>\n            </div>\n        )\n    }\n}\n\nconst WrappedNormalLoginForm = Form.create()(Login);\nexport default connect(\n    state=>({user:state.user}),{login}\n)(WrappedNormalLoginForm);"]},"metadata":{},"sourceType":"module"}