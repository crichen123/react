{"ast":null,"code":"import \"antd/es/card/style/css\";\nimport _Card from \"antd/es/card\";\nimport \"antd/es/table/style/css\";\nimport _Table from \"antd/es/table\";\nimport \"antd/es/button/style/css\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/icon/style/css\";\nimport _Icon from \"antd/es/icon\";\nimport \"antd/es/message/style/css\";\nimport _message from \"antd/es/message\";\nvar _jsxFileName = \"/home/crc/WebstormProjects/react-admin/src/pages/category/category.jsx\";\nimport React from 'react';\nimport \"./category.less\";\nimport LinkButton from \"../../components/link-button\";\nimport { reqCategorys } from \"../../api\";\nexport default class Category extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      categorys: [],\n      loading: false,\n      parentId: '0',\n      parentName: '',\n      subCategorys: []\n    };\n\n    this.initColumns = () => {\n      this.columns = [{\n        title: '分类名称',\n        dataIndex: 'name',\n        key: 'name'\n      }, {\n        title: '操作',\n        width: 300,\n        dataIndex: '',\n        key: 'x',\n        render: category => React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 29\n          },\n          __self: this\n        }, React.createElement(LinkButton, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 30\n          },\n          __self: this\n        }, \"\\u4FEE\\u6539\\u5206\\u7C7B\"), React.createElement(LinkButton, {\n          onClick: () => {\n            this.showSubCategorys(category);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 31\n          },\n          __self: this\n        }, \"\\u67E5\\u770B\\u5B50\\u5206\\u7C7B\"))\n      }];\n    };\n\n    this.showSubCategorys = category => {};\n\n    this.getCategorys = async () => {\n      this.setState({\n        loading: true\n      });\n      const {\n        parentId\n      } = this.state;\n      const result = await reqCategorys(parentId);\n      this.setState({\n        loading: false\n      });\n\n      if (result.data.status == \"0\") {\n        const categorys = result.data.data;\n        console.log(categorys);\n\n        if (parentId === '0') {\n          this.setState({\n            categorys\n          });\n        } else {\n          this.setState({\n            subCategorys: categorys\n          });\n        }\n      } else {\n        _message.error(\"获取分类失败\");\n      }\n    };\n  }\n\n  componentWillMount() {\n    this.initColumns();\n  }\n\n  componentDidMount() {\n    this.getCategorys();\n  }\n\n  render() {\n    const {\n      categorys,\n      loading\n    } = this.state;\n    const columns = this.columns;\n    const title = \"一级分类列表\";\n    const extra = React.createElement(_Button, {\n      type: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(_Icon, {\n      type: \"plus\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), \"\\u6DFB\\u52A0\");\n    const dataSource = [{\n      \"parentId\": '0',\n      \"_id\": '5ca9d69',\n      \"name\": '家用电器',\n      \"_v\": 0\n    }, {\n      \"parentId\": '0',\n      \"_id\": '5ca9d6c',\n      \"name\": '电脑',\n      \"_v\": 0\n    }, {\n      \"parentId\": '0',\n      \"_id\": '5ca9d7c',\n      \"name\": '图书',\n      \"_v\": 0\n    }, {\n      \"parentId\": '0',\n      \"_id\": '5ca9dbe',\n      \"name\": '服装',\n      \"_v\": 0\n    }];\n    /*\n    return (\n        <Card title={title} extra={extra}>\n            <Table\n                rowKey=\"_id\"\n                bordered\n                dataSource={dataSource} columns={columns} />;\n        </Card>\n    )\n    *\n     */\n\n    return React.createElement(_Card, {\n      title: title,\n      extra: extra,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(_Table, {\n      rowKey: \"_id\",\n      bordered: true,\n      dataSource: categorys,\n      columns: columns,\n      pagination: {\n        defaultPageSize: 5\n      },\n      loading: loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/crc/WebstormProjects/react-admin/src/pages/category/category.jsx"],"names":["React","LinkButton","reqCategorys","Category","Component","state","categorys","loading","parentId","parentName","subCategorys","initColumns","columns","title","dataIndex","key","width","render","category","showSubCategorys","getCategorys","setState","result","data","status","console","log","error","componentWillMount","componentDidMount","extra","dataSource","defaultPageSize"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {Card,Table,Button,Icon,message} from \"antd\"\nimport \"./category.less\"\nimport LinkButton from \"../../components/link-button\";\nimport {reqCategorys} from \"../../api\"\n\nexport default class Category extends React.Component {\n\n    state = {\n        categorys:[],\n        loading:false,\n        parentId:'0',\n        parentName:'',\n        subCategorys:[]\n    }\n\n    initColumns = () =>{\n        this.columns = [\n            {\n                title: '分类名称',\n                dataIndex: 'name',\n                key: 'name',\n            },\n            {\n                title: '操作',\n                width:300,\n                dataIndex: '',\n                key: 'x',\n                render:(category)=>(<span>\n                    <LinkButton>修改分类</LinkButton>\n                    <LinkButton onClick={()=>{this.showSubCategorys(category)}}>查看子分类</LinkButton>\n                </span>)\n            }\n\n        ];\n    }\n\n    showSubCategorys=(category)=>{\n\n    }\n\n    getCategorys = async () =>{\n       this.setState({loading:true});\n       const {parentId} = this.state;\n       const result = await reqCategorys(parentId);\n        this.setState({loading:false});\n       if(result.data.status==\"0\"){\n            const categorys = result.data.data;\n            console.log(categorys);\n            if(parentId==='0'){\n                this.setState({categorys});\n            }else{\n                this.setState({subCategorys:categorys})\n            }\n\n\n       }else{\n           message.error(\"获取分类失败\")\n       }\n    }\n\n    componentWillMount() {\n        this.initColumns();\n    }\n\n    componentDidMount() {\n        this.getCategorys();\n    }\n\n    render(){\n        const {categorys,loading} = this.state;\n        const columns = this.columns\n        const title = \"一级分类列表\";\n        const extra = (\n            <Button type=\"primary\">\n                <Icon type=\"plus\"/>添加\n            </Button>\n        )\n\n        const dataSource = [\n            {\n                \"parentId\": '0',\n                \"_id\": '5ca9d69',\n                \"name\": '家用电器',\n                \"_v\":0\n            },{\n                \"parentId\": '0',\n                \"_id\": '5ca9d6c',\n                \"name\": '电脑',\n                \"_v\":0\n            },{\n                \"parentId\": '0',\n                \"_id\": '5ca9d7c',\n                \"name\": '图书',\n                \"_v\":0\n            },{\n                \"parentId\": '0',\n                \"_id\": '5ca9dbe',\n                \"name\": '服装',\n                \"_v\":0\n            }\n\n        ];\n\n\n\n        /*\n        return (\n            <Card title={title} extra={extra}>\n                <Table\n                    rowKey=\"_id\"\n                    bordered\n                    dataSource={dataSource} columns={columns} />;\n            </Card>\n        )\n        *\n         */\n\n        return (\n            <Card title={title} extra={extra}>\n                <Table\n                    rowKey=\"_id\"\n                    bordered\n                    dataSource={categorys}\n                    columns={columns}\n                    pagination={{defaultPageSize:5}}\n                    loading={loading}\n                />\n            </Card>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}