{"ast":null,"code":"import \"antd/es/modal/style/css\";\nimport _Modal from \"antd/es/modal\";\nvar _jsxFileName = \"/home/crc/WebstormProjects/react-admin/src/components/header/header.jsx\";\nimport React from 'react';\nimport \"./index.less\";\nimport { formateDate } from \"../../utils/dateUtils\";\nimport memoryUtils from \"../../utils/memoryUtils\";\nimport storageUtiles from \"../../utils/storageUtiles\";\nimport { reqWeather } from \"../../api\";\nimport { withRouter } from 'react-router-dom';\nimport menuList from \"../../config/menuConfig\";\nimport LinkButton from \"../link-button\";\nimport { connect } from \"react-redux\";\n\nclass HeaderContent extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      currentTime: formateDate(Date.now()),\n      dayPictureUrl: '',\n      weather: ''\n    };\n\n    this.getTime = () => {\n      this.intervalId = setInterval(() => {\n        const currentTime = formateDate(Date.now());\n        this.setState({\n          currentTime\n        });\n      }, 1000);\n    };\n\n    this.getWeather = async () => {\n      const {\n        dayPictureUrl,\n        weather\n      } = await reqWeather('西安');\n      this.setState({\n        dayPictureUrl,\n        weather\n      });\n    };\n\n    this.getTitle = () => {\n      let title;\n      const path = this.props.location.pathname;\n      menuList.forEach(item => {\n        if (item.key === path) {\n          title = item.title;\n        } else if (item.children) {\n          const cItem = item.children.find(cItem => path.indexOf(cItem.key) === 0);\n\n          if (cItem) {\n            title = cItem.title;\n          }\n        }\n      });\n      return title;\n    };\n\n    this.Logout = () => {\n      _Modal.confirm({\n        content: '确定退出吗？',\n        onOk: () => {\n          console.log('OK');\n          storageUtiles.removeUser();\n          memoryUtils.user = {};\n          this.props.history.replace('/login');\n        }\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getTime();\n    this.getWeather();\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalId);\n  }\n\n  render() {\n    const {\n      currentTime,\n      dayPictureUrl,\n      weather\n    } = this.state;\n    const user = memoryUtils.user.username; //const title = this.getTitle();\n\n    const title = this.props.headTitle;\n    return React.createElement(\"div\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"header-top\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"\\u6B22\\u8FCE\\uFF0C\", user), React.createElement(LinkButton, {\n      onClick: this.Logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"\\u9000\\u51FA\")), React.createElement(\"div\", {\n      className: \"header-bottom\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"header-bottom-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, title), React.createElement(\"div\", {\n      className: \"header-bottom-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, currentTime), React.createElement(\"img\", {\n      alt: \"daypicture\",\n      src: dayPictureUrl,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, weather))));\n  }\n\n}\n\nexport default connect(state => ({\n  headTitle: state.headTitle\n}), {})(withRouter(HeaderContent));","map":{"version":3,"sources":["/home/crc/WebstormProjects/react-admin/src/components/header/header.jsx"],"names":["React","formateDate","memoryUtils","storageUtiles","reqWeather","withRouter","menuList","LinkButton","connect","HeaderContent","Component","state","currentTime","Date","now","dayPictureUrl","weather","getTime","intervalId","setInterval","setState","getWeather","getTitle","title","path","props","location","pathname","forEach","item","key","children","cItem","find","indexOf","Logout","confirm","content","onOk","console","log","removeUser","user","history","replace","componentDidMount","componentWillUnmount","clearInterval","render","username","headTitle"],"mappings":"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","sourcesContent":["import React from 'react'\nimport \"./index.less\"\nimport {formateDate} from \"../../utils/dateUtils\"\nimport memoryUtils from \"../../utils/memoryUtils\";\nimport storageUtiles from \"../../utils/storageUtiles\";\nimport {reqWeather} from \"../../api\";\nimport {withRouter} from 'react-router-dom'\nimport menuList from \"../../config/menuConfig\";\nimport { Modal} from 'antd';\nimport LinkButton from \"../link-button\";\nimport {connect} from \"react-redux\"\n\nclass HeaderContent extends React.Component{\n    state = {\n        currentTime:formateDate(Date.now()),\n        dayPictureUrl:'',\n        weather:''\n    }\n\n    getTime=()=>{\n        this.intervalId = setInterval(()=>{\n            const currentTime = formateDate(Date.now())\n            this.setState({currentTime})\n        },1000)\n    }\n\n    getWeather = async() => {\n        const {dayPictureUrl,weather} = await reqWeather('西安')\n        this.setState({dayPictureUrl,weather})\n    }\n\n    getTitle = () =>{\n        let title;\n        const path = this.props.location.pathname\n        menuList.forEach(item=>{\n            if(item.key===path){\n               title = item.title\n            }else if(item.children){\n                const cItem = item.children.find(cItem=>path.indexOf(cItem.key)===0);\n                if(cItem){\n                    title = cItem.title;\n                }\n            }\n        })\n        return title;\n    }\n\n    Logout= () =>{\n        Modal.confirm({\n            content: '确定退出吗？',\n            onOk : () => {\n                console.log('OK');\n                storageUtiles.removeUser();\n                memoryUtils.user = {};\n                this.props.history.replace('/login')\n            },\n\n        })\n    }\n\n    componentDidMount() {\n        this.getTime();\n        this.getWeather()\n    }\n\n    componentWillUnmount() {\n        clearInterval(this.intervalId);\n    }\n\n    render() {\n        const {currentTime,dayPictureUrl,weather} = this.state\n        const user = memoryUtils.user.username;\n        //const title = this.getTitle();\n        const title = this.props.headTitle\n        return (\n            <div className=\"header\">\n               <div className=\"header-top\">\n                   <span>欢迎，{user}</span>\n                   <LinkButton onClick={this.Logout}>退出</LinkButton>\n               </div>\n                <div className=\"header-bottom\">\n                    <div className=\"header-bottom-left\">{title}</div>\n                    <div className=\"header-bottom-right\">\n                        <span>{currentTime}</span>\n                        <img alt=\"daypicture\" src={dayPictureUrl} />\n                        <span>{weather}</span>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default  connect(\n    state=>({headTitle:state.headTitle}),{}\n)(withRouter(HeaderContent))"]},"metadata":{},"sourceType":"module"}