{"ast":null,"code":"import \"antd/es/card/style/css\";\nimport _Card from \"antd/es/card\";\nimport \"antd/es/table/style/css\";\nimport _Table from \"antd/es/table\";\nimport \"antd/es/button/style/css\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/modal/style/css\";\nimport _Modal from \"antd/es/modal\";\nvar _jsxFileName = \"/home/crc/WebstormProjects/react-admin/src/pages/user/user.jsx\";\nimport React from 'react';\nimport { PAGE_SIZE } from \"../../utils/constant\";\nimport { formateDate } from \"../../utils/dateUtils\";\nimport LinkButton from \"../../components/link-button\";\nimport AddForm from \"../role/add-form\";\nimport { reqGetUsers, reqDeleUser } from \"../../api\";\nexport default class User extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: false,\n      users: [],\n      roles: [],\n      isShow: false\n    };\n\n    this.initColumn = () => {\n      this.columns = [{\n        title: '用户明',\n        dataIndex: \"usernamne\"\n      }, {\n        title: \"邮箱\",\n        dataIndex: \"email\"\n      }, {\n        title: \"电话\",\n        dataIndex: \"phone\"\n      }, {\n        title: \"注册时间\",\n        dataIndex: \"create_time\",\n        render: formateDate\n      }, {\n        title: \"所属角色\",\n        dataIndex: \"role_id\",\n        // render:(role_id)=>this.state.roles.find(role=>role._id ===role_id).name\n        render: role_id => this.roleNames[role_id]\n      }, {\n        title: \"操作\",\n        render: user => React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 40\n          },\n          __self: this\n        }, React.createElement(LinkButton, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 41\n          },\n          __self: this\n        }, \"\\u4FEE\\u6539\"), React.createElement(LinkButton, {\n          onClick: () => this.deleteUser(user),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42\n          },\n          __self: this\n        }, \"\\u5220\\u9664\"))\n      }];\n    };\n\n    this.addOrUPdateUser = () => {};\n\n    this.deleteUser = user => {\n      _Modal.confirm('');\n    };\n\n    this.initRoleNames = roles => {\n      const roleNames = roles.reduce((pre, role) => {\n        pre[role._id] = role.name;\n        return pre;\n      }, []);\n      this.roleNames = roleNames;\n    };\n\n    this.getUsers = async () => {\n      const result = await reqGetUsers();\n\n      if (result.status === 0) {\n        const {\n          users,\n          roles\n        } = result.data;\n        this.initRoleNames(roles);\n        this.setState({\n          users,\n          roles\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.initColumn();\n    this.getUsers();\n  }\n\n  render() {\n    const title = React.createElement(_Button, {\n      type: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"\\u521B\\u5EFA\\u7528\\u6237\");\n    const {\n      loading,\n      users,\n      isShow\n    } = this.state;\n    return React.createElement(_Card, {\n      title: title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(_Table, {\n      bordered: true,\n      rowKey: \"_id\",\n      loadding: loading,\n      dataSource: users,\n      pagination: {\n        defaultPageSize: 5\n      },\n      columns: this.columns,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }), React.createElement(_Modal, {\n      title: \"\\u6DFB\\u52A0\\u7528\\u6237\",\n      visible: isShow,\n      onOk: this.addOrUPdateUser,\n      onCancel: () => this.setState({\n        isShow: false\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"1111\")));\n  }\n\n}","map":{"version":3,"sources":["/home/crc/WebstormProjects/react-admin/src/pages/user/user.jsx"],"names":["React","PAGE_SIZE","formateDate","LinkButton","AddForm","reqGetUsers","reqDeleUser","User","Component","state","loading","users","roles","isShow","initColumn","columns","title","dataIndex","render","role_id","roleNames","user","deleteUser","addOrUPdateUser","confirm","initRoleNames","reduce","pre","role","_id","name","getUsers","result","status","data","setState","componentDidMount","defaultPageSize"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {Modal, Card, Button, Table, message} from \"antd\"\nimport {PAGE_SIZE} from \"../../utils/constant\";\nimport {formateDate} from \"../../utils/dateUtils\";\nimport LinkButton from \"../../components/link-button\";\nimport AddForm from \"../role/add-form\";\nimport {reqGetUsers,reqDeleUser} from \"../../api\"\n\nexport default class User extends React.Component {\n\n    state = {\n        loading:false,\n        users:[],\n        roles:[],\n        isShow:false\n    }\n\n    initColumn = ()=>{\n        this.columns = [{\n            title:'用户明',\n            dataIndex:\"usernamne\"\n        },{\n            title:\"邮箱\",\n            dataIndex: \"email\"\n        },{\n            title:\"电话\",\n            dataIndex: \"phone\"\n        },{\n            title:\"注册时间\",\n            dataIndex: \"create_time\",\n            render:formateDate\n        },{\n            title:\"所属角色\",\n            dataIndex: \"role_id\",\n           // render:(role_id)=>this.state.roles.find(role=>role._id ===role_id).name\n            render:(role_id)=>this.roleNames[role_id]\n        },{\n            title:\"操作\",\n           render:(user)=>(\n            <span>\n                <LinkButton>修改</LinkButton>\n                <LinkButton onClick={()=>this.deleteUser(user)}>删除</LinkButton>\n            </span>\n           )\n        }\n        ]\n    }\n\n    addOrUPdateUser = () =>{}\n\n    deleteUser =(user) =>{\n        Modal.confirm('')\n    }\n\n    initRoleNames = (roles) => {\n        const  roleNames = roles.reduce((pre,role)=>{\n            pre[role._id] = role.name\n            return pre\n        },[])\n        this.roleNames = roleNames\n    }\n\n    getUsers = async() => {\n        const result = await reqGetUsers();\n        if(result.status === 0){\n            const {users,roles} = result.data\n            this.initRoleNames(roles)\n            this.setState({\n                users,roles\n            })\n        }\n\n    }\n\n\n    componentDidMount() {\n        this.initColumn()\n        this.getUsers()\n    }\n\n    render(){\n        const title = (<Button type=\"primary\">创建用户</Button>);\n        const {loading,users,isShow} = this.state\n        return (\n\n            <Card title={title}>\n                <Table\n                    bordered\n                    rowKey=\"_id\"\n                    loadding={loading}\n                    dataSource={users}\n                    pagination={ {defaultPageSize:5} }\n                    columns={this.columns} />\n                <Modal\n                    title=\"添加用户\"\n                    visible={isShow}\n                    onOk={this.addOrUPdateUser}\n                    onCancel={()=>this.setState({isShow: false})}\n                >\n                    <div>1111</div>\n                </Modal>\n\n\n            </Card>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}